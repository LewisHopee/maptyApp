!function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function n(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}return n}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return a(this,n)}}function a(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?s(e):n}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(e,n,o){u(this,t),d(this,"date",new Date),d(this,"id",(Date.now()+"").slice(-10)),d(this,"clicks",0),this.coords=e,this.distance=n,this.duration=o}return p(t,[{key:"_setDescription",value:function(){this.description="".concat(this.type[0].toUpperCase()).concat(this.type.slice(1)," on ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.date.getMonth()]," ").concat(this.date.getDate())}},{key:"click",value:function(){this.clicks++}}]),t}(),h=function(t){o(n,t);var e=i(n);function n(t,o,r,i){var a;return u(this,n),d(s(a=e.call(this,t,o,r)),"type","running"),a.cadence=i,a.calcPace(),a._setDescription(),a}return p(n,[{key:"calcPace",value:function(){return this.pace=this.duration/this.distance,this.pace}}]),n}(f),v=function(t){o(n,t);var e=i(n);function n(t,o,r,i){var a;return u(this,n),d(s(a=e.call(this,t,o,r)),"type","cycling"),a.elevationGain=i,a.calcSpeed(),a._setDescription(),a}return p(n,[{key:"calcSpeed",value:function(){return this.speed=this.distance/(this.duration/60),this.speed}}]),n}(f),_=document.querySelector(".form"),y=document.querySelector(".workouts"),w=document.querySelector(".form__input--type"),k=document.querySelector(".form__input--distance"),m=document.querySelector(".form__input--duration"),g=document.querySelector(".form__input--cadence"),b=document.querySelector(".form__input--elevation"),S=new WeakMap,P=new WeakMap,O=new WeakMap,M=new WeakMap;new(function(){function t(){u(this,t),S.set(this,{writable:!0,value:void 0}),P.set(this,{writable:!0,value:13}),O.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:[]}),this._getPosition(),this._getLocalStorage(),_.addEventListener("submit",this._newWorkout.bind(this)),w.addEventListener("change",this._toggleElevationField),y.addEventListener("click",this._moveToPopup.bind(this))}return p(t,[{key:"_getPosition",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this._loadMap.bind(this),(function(){alert("Could not get your position")}))}},{key:"_loadMap",value:function(t){var o=this,r=[t.coords.latitude,t.coords.longitude];n(this,S,L.map("map").setView(r,e(this,P))),L.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e(this,S)),e(this,S).on("click",this._showForm.bind(this)),e(this,M).forEach((function(t){o._renderWorkoutMarker(t)}))}},{key:"_showForm",value:function(t){n(this,O,t),_.classList.remove("hidden"),k.focus()}},{key:"_hideForm",value:function(){k.value=m.value=g.value=b.value="",_.style.display="none",_.classList.add("hidden"),setTimeout((function(){return _.style.display="grid"}),1e3)}},{key:"_toggleElevationField",value:function(){b.closest(".form__row").classList.toggle("form__row--hidden"),g.closest(".form__row").classList.toggle("form__row--hidden")}},{key:"_newWorkout",value:function(t){var n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((function(t){return Number.isFinite(t)}))},o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((function(t){return t>0}))};t.preventDefault();var r,i=w.value,a=+k.value,s=+m.value,c=e(this,O).latlng,u=c.lat,l=c.lng;if("running"===i){var p=+g.value;if(!n(a,s,p)||!o(a,s,p))return alert("Inputs have to be positive numbers!");r=new h([u,l],a,s,p)}if("cycling"===i){var d=+b.value;if(!n(a,s,d)||!o(a,s))return alert("Inputs have to be positive numbers!");r=new v([u,l],a,s,d)}e(this,M).push(r),this._renderWorkoutMarker(r),this._renderWorkout(r),this._hideForm(),this._setLocalStorage()}},{key:"_renderWorkoutMarker",value:function(t){L.marker(t.coords).addTo(e(this,S)).bindPopup(L.popup({maxWidth:250,minWidth:100,autoClose:!1,closeOnClick:!1,className:"".concat(t.type,"-popup")})).setPopupContent("".concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è"," ").concat(t.description)).openPopup()}},{key:"_renderWorkout",value:function(t){var e='\n      <li class="workout workout--'.concat(t.type,'" data-id="').concat(t.id,'">\n        <h2 class="workout__title">').concat(t.description,'</h2>\n        <div class="workout__details">\n          <span class="workout__icon">').concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è",'</span>\n          <span class="workout__value">').concat(t.distance,'</span>\n          <span class="workout__unit">km</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">‚è±</span>\n          <span class="workout__value">').concat(t.duration,'</span>\n          <span class="workout__unit">min</span>\n        </div>\n    ');"running"===t.type&&(e+='\n        <div class="workout__details">\n          <span class="workout__icon">‚ö°Ô∏è</span>\n          <span class="workout__value">'.concat(t.pace.toFixed(1),'</span>\n          <span class="workout__unit">min/km</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">ü¶∂üèº</span>\n          <span class="workout__value">').concat(t.cadence,'</span>\n          <span class="workout__unit">spm</span>\n        </div>\n      </li>\n      ')),"cycling"===t.type&&(e+='\n        <div class="workout__details">\n          <span class="workout__icon">‚ö°Ô∏è</span>\n          <span class="workout__value">'.concat(t.speed.toFixed(1),'</span>\n          <span class="workout__unit">km/h</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">‚õ∞</span>\n          <span class="workout__value">').concat(t.elevationGain,'</span>\n          <span class="workout__unit">m</span>\n        </div>\n      </li>\n      ')),_.insertAdjacentHTML("afterend",e)}},{key:"_moveToPopup",value:function(t){if(e(this,S)){var n=t.target.closest(".workout");if(n){var o=e(this,M).find((function(t){return t.id===n.dataset.id}));e(this,S).setView(o.coords,e(this,P),{animate:!0,pan:{duration:1}})}}}},{key:"_setLocalStorage",value:function(){localStorage.setItem("workouts",JSON.stringify(e(this,M)))}},{key:"_getLocalStorage",value:function(){var t=this,o=JSON.parse(localStorage.getItem("workouts"));o&&(n(this,M,o),e(this,M).forEach((function(e){t._renderWorkout(e)})))}},{key:"reset",value:function(){localStorage.removeItem("workouts"),location.reload()}}]),t}())}();
//# sourceMappingURL=script.HASH_REF_bc9b72eaf1d1ffa1deab92aaf8fedd2a.js.map
